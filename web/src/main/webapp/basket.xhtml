<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/resources/templates/template.xhtml">
    <ui:define name="afterHeader">
        <h1>My Basket</h1>
    </ui:define>
    <ui:define name="content">
        <h:form id="basketControlContainer">
            <h:commandButton action="#{basketJSF.clearBasket}" styleClass="clearBasket commandbutton"
                             value="Clear" disabled="#{basketJSF.basketSize == 0}">
                <f:ajax event="action" render="basketTableGroup basketLinkForm basketControlContainer"/>
            </h:commandButton>
            <h:commandButton action="#{basketJSF.goToPaymentAssembly}" styleClass="checkoutBasket commandbutton"
                             value="Checkout" disabled="#{basketJSF.basketSize == 0}"/>
        </h:form>
        <h:panelGroup id="basketTableGroup">
            <h:dataTable id="basketTable" var="basketItem" value="#{basketJSF.basketItems}"
                         headerClass="basketHeader"
                         rowClasses="basketRow"
                         columnClasses="basketTitle,basketPrice,basketQuantity,basketInc,basketDec,basketRemove"
                         cellpadding="10"
                         cellspacing="0">
                <h:column>
                    <f:facet name="header">
                        <div class="basketHeaderTitle">
                            Title
                        </div>
                    </f:facet>
                    #{basketItem.product.name}
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <div class="basketHeaderPrice">
                            Price
                        </div>
                    </f:facet>
                    CHF #{basketItem.product.unitprice}
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <div class="basketHeaderQuantity">
                            Quantity
                        </div>
                    </f:facet>
                    #{basketItem.quantity}
                </h:column>
                <h:column>
                    <f:facet name="header"/>
                    <h:commandButton type="button" action="#{basketJSF.incrementItemQuantity(basketItem.product)}"
                                     styleClass="basketbutton"
                                     image="resources/images/plus.png">
                        <f:ajax event="action" render="basketTableGroup basketLinkForm"/>
                    </h:commandButton>
                </h:column>
                <h:column>
                    <f:facet name="header"/>
                    <h:commandButton type="button" action="#{basketJSF.decrementItemQuantity(basketItem.product)}"
                                     styleClass="basketbutton"
                                     image="resources/images/minus.png">
                        <f:ajax event="action" render="basketTableGroup basketLinkForm basketControlContainer"/>
                    </h:commandButton>
                </h:column>
                <h:column>
                    <f:facet name="header"/>
                    <h:commandButton type="button" action="#{basketJSF.removeFromBasket(basketItem.product)}"
                                     styleClass="basketbutton"
                                     image="resources/images/remove.png">
                        <f:ajax event="action" render="basketTableGroup basketLinkForm basketControlContainer"/>
                    </h:commandButton>
                </h:column>
            </h:dataTable>
        </h:panelGroup>
    </ui:define>
</ui:composition>